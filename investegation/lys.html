<!doctype html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>hello phaser!</title>
    <script src="_site/phaser/phaser.2.2.2.min.js"></script>
</head>
<body>
<div id="phaser-example" align="center"/>

<script type="text/javascript">

    window.onload = function () {

        var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', {
            preload: preload,
            create: create,
            update: update,
            render: render
        });

        function preload() {

            game.stage.backgroundColor = '#007236';

            game.load.image('mushroom', 'assets/sprites/mushroom2.png');
            game.load.image('phaser', 'assets/sprites/sonic_havok_sanity.png');
            game.load.image('background', 'assets/games/crazyrunner/bg.PNG');

        }

        var cursors;
        var d;
        var m;

        function create() {

            //  Modify the world and camera bounds
            game.world.setBounds(0, 0, 400, 40000);
            game.camera.y = 40000;

            bg = game.add.tileSprite(0, 0, 800, 40000, 'background');

            for (var i = 0; i < 300; i++) {
                m = game.add.sprite(game.rnd.integerInRange(200, 600), game.world.randomY, 'mushroom');
                m.anchor.setTo(0.5, 0.5);
            }

            game.add.text(600, 800, "- phaser -", {font: "32px Arial", fill: "#330088", align: "center"});

            d = game.add.sprite(400, 0, 'phaser');
            d.anchor.setTo(0.5, 1);

            game.physics.enable(d, Phaser.Physics.ARCADE);
            d.input.enableDrag();

            //  This will lock the sprite so it can only be dragged horizontally, not vertically
            d.input.allowVerticalDrag = false;

        }

        function update() {
            game.camera.y -= 10;
//            d.angle += 1;
            d.position.y = game.camera.y + 600


            //  move when you click on mobile
            if (game.input.pointer1.isDown) {
                //  400 is the speed it will move towards the mouse
                game.physics.arcade.moveToXY(d,game.input.pointer1.x, d.position.y, 400);

                //  if it's overlapping the mouse, don't move any more
                if (Phaser.Rectangle.contains(d.body, game.input.pointer1.x ,d.position.y))
                {
                    d.body.velocity.setTo(0, 0);
                }
            }
            else {
                d.body.velocity.setTo(0, 0);
            }

            //  move when you click on mobile
            if(game.input.mousePointer.isDown){
                game.physics.arcade.moveToXY(d,game.input.x, d.position.y, 400);
                if (Phaser.Rectangle.contains(d.body, game.input.x ,game.input.y))
                {
                    d.body.velocity.setTo(0, 0);
                }
            }else{
                d.body.velocity.setTo(0, 0);
            }






//            if (cursors.up.isDown)
//            {
//                if (cursors.up.shiftKey)
//                {
//                    d.angle++;
//                }
//                else
//                {
//                    game.camera.y -= 4;
//                }
//            }
//            else if (cursors.down.isDown)
//            {
//                if (cursors.down.shiftKey)
//                {
//                    d.angle--;
//                }
//                else
//                {
//                    game.camera.y += 4;
//                }
//            }
//
//            if (cursors.left.isDown)
//            {
//                if (cursors.left.shiftKey)
//                {
//                    game.world.rotation -= 0.05;
//                }
//                else
//                {
//                    game.camera.x -= 4;
//                }
//            }
//            else if (cursors.right.isDown)
//            {
//                if (cursors.right.shiftKey)
//                {
//                    game.world.rotation += 0.05;
//                }
//                else
//                {
//                    game.camera.x += 4;
//                }
//            }

        }

        function render() {

            game.debug.cameraInfo(game.camera, 32, 32);

        }

    };

</script>

</body>
</html>